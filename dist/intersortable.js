"use strict";var h=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var X=(e,t)=>{for(var r in t)h(e,r,{get:t[r],enumerable:!0})},Y=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of B(t))!D.call(e,n)&&n!==r&&h(e,n,{get:()=>t[n],enumerable:!(o=N(t,n))||o.enumerable});return e};var $=e=>Y(h({},"__esModule",{value:!0}),e);var W={};X(W,{cleanupSortable:()=>U,initSortable:()=>j,restoreSortOrder:()=>z});module.exports=$(W);var I=!1,c=null,u=null,b={x:0,y:0},y={x:0,y:0},w=null,g="above",p=null,L="above",d={};function T(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function E(e){let t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function P(e,t,r,o,n){e.removeAttribute("data-intersortable-item"),e.style.position="fixed",e.style.pointerEvents="none",e.style.zIndex="9999",e.style.opacity="1",e.style.left=r-n.x+"px",e.style.top=o-n.y+"px",e.style.transform="scale(1.05)",e.style.boxShadow="0 10px 25px rgba(0, 0, 0, 0.3)",e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px"}function F(){I=!1,document.body.style.cursor="auto",w=null,p=null,L="above",document.querySelectorAll("[data-intersortable-item]").forEach(t=>{setTimeout(()=>{t.style.transition="",t.style.transform=""},250)})}function G(e,t,r){let o=[];document.querySelectorAll("[data-intersortable-item]").forEach(a=>{a!==e&&o.push({element:a,rect:a.getBoundingClientRect()})});let l=e.getBoundingClientRect();if(e.parentNode&&e.parentNode.removeChild(e),t.hasAttribute("data-intersortable-container"))t.appendChild(e);else{let a=t.parentNode;if(!a)return;if(r==="above")a.insertBefore(e,t);else{let f=t.nextSibling;f?a.insertBefore(e,f):a.appendChild(e)}}let i=e.getBoundingClientRect(),s=l.left-i.left,m=l.top-i.top;(Math.abs(s)>1||Math.abs(m)>1)&&(e.style.transform=`translate(${s}px, ${m}px)`,e.style.transition="none",requestAnimationFrame(()=>{e.style.transition="transform 0.2s ease-out",e.style.transform="translate(0, 0)"})),o.forEach(({element:a,rect:f})=>{let H=a.getBoundingClientRect(),x=f.left-H.left,v=f.top-H.top;(Math.abs(x)>1||Math.abs(v)>1)&&(a.style.transform=`translate(${x}px, ${v}px)`,a.style.transition="none",requestAnimationFrame(()=>{a.style.transition="transform 0.15s ease-out",a.style.transform="translate(0, 0)"}))})}function S(){u&&(y=E(u));let e=document.querySelectorAll("[data-intersortable-item]"),t=null,r=1/0;e.forEach(l=>{let i=E(l),s=T(i,y);s<r&&(r=s,t=l)}),document.querySelectorAll("[data-intersortable-container]").forEach(l=>{if(l.querySelectorAll("[data-intersortable-item]").length===0){let s=E(l),m=T(s,y);m<r&&(r=m,t=l)}});let n=t;if(w=n,n)if(n===c)g="above";else{let l=E(n);g=y.y<=l.y?"above":"below"}if(n&&c&&n!==c&&(n!==p||g!==L)){let l=(d.getContainerId||C)(c);if(G(c,n,g),d.onMove){let i=(d.getItemId||M)(c),s=(d.getContainerId||C)(c),m=R(),a=m[s]?.indexOf(i)??-1;i&&l&&s&&d.onMove({itemId:i,fromContainer:l,toContainer:s,newIndex:a,allContainers:m})}p=n,L=g}}function M(e){return e.dataset.itemId||e.id||""}function C(e){let t=e.closest("[data-intersortable-container]");return t?.dataset.containerId||t?.id||""}function R(){let e=document.querySelectorAll("[data-intersortable-container]"),t={};return e.forEach(r=>{let o=(d.getContainerId||C)(r);if(o){let n=r.querySelectorAll("[data-intersortable-item]");t[o]=Array.from(n).map(l=>(d.getItemId||M)(l)).filter(l=>l)}}),t}function j(e={}){d={...e},document.addEventListener("mousedown",q),document.addEventListener("mousemove",A),document.addEventListener("mouseup",O)}function q(e){let t=e.target,r=null,o=null;if(t.closest("[data-drag-handle]"))r=t.closest("[data-drag-handle]"),o=r.closest("[data-intersortable-item]");else if(o=t.closest("[data-intersortable-item]"),o){if(o.querySelector("[data-drag-handle]"))return;r=o}if(o&&r){I=!0,c=o,p=null,L="above";let n=o.getBoundingClientRect();b.x=e.clientX-n.left,b.y=e.clientY-n.top,u=o.cloneNode(!0),P(u,o,e.clientX,e.clientY,b),document.body.appendChild(u),S(),o.style.opacity="0.4",document.body.style.cursor="grabbing",e.preventDefault()}}function A(e){if(I&&u){let t=e.clientX-b.x,r=e.clientY-b.y;u.style.left=t+"px",u.style.top=r+"px",S()}}function O(e){if(I){if(d.onComplete){let t=R();d.onComplete(t)}u&&(document.body.removeChild(u),u=null),c&&(c.style.opacity="1",c=null),F()}}function z(e){Object.entries(e).forEach(([t,r])=>{let o=document.querySelector(`[data-container-id="${t}"], #${t}`);if(!o)return;let n=new Map;o.querySelectorAll("[data-intersortable-item]").forEach(i=>{let s=(d.getItemId||M)(i);s&&n.set(s,i)}),r.forEach(i=>{let s=n.get(i);s&&o.appendChild(s)})})}function U(){document.removeEventListener("mousedown",q),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",O)}
